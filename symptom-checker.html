<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Nunito' rel='stylesheet'>
    <link rel="stylesheet" type="text/css" href="styles.css"/>
    <title>healthtrack</title>
</head>
<body class="symptom-page">
    <header class="symptom-page">
        <h1><a class="nav-link" href="index.html">healthtrack</a></h1>
        <ul id="nav-bar">
            <li><a class="nav-link" href="index.html">home</a></li>
            <li><a class="nav-link" href="symptom-checker.html">symptom checker</a></li>
            <li><a class="nav-link" href="health-tracker.html">health tracker</a></li>
        </ul>
    </header>

    <main>
        <div id="intro">
            <div id="intro-top">
                <img src="images/stethoscope.png">
                <h3>Symptom checker</h3>
            </div>
            <hr>
            <p>Learn the basics about common illnesses and their symptoms. Click a filter to get started!</p>
            <div id="filters">
                <input type="checkbox" id="all" value="all">
                <label for="all" label>all</label>
                <input type="checkbox" id="chills" value="chills">
                <label for="chills" label>chills</label>
                <input type="checkbox" id="cough" value="cough">
                <label for="cough" label>cough</label>
                <input type="checkbox" id="diarrhea" value="diarrhea">
                <label for="diarrhea" label>diarrhea</label>
                <input type="checkbox" id="eye-irritation" value="eye-irritation">
                <label for="eye-irritation" label>eye irritation</label>
                <input type="checkbox" id="fatigue" value="fatigue">
                <label for="fatigue" label>fatigue</label>
                <input type="checkbox" id="fever" value="fever">
                <label for="fever" label>fever</label>
                <input type="checkbox" id="headache" value="headache">
                <label for="headache" label>headache</label>
                <input type="checkbox" id="nausea" value="nausea">
                <label for="nausea" label>nausea</label>
                <input type="checkbox" id="runny-nose" value="runny-nose">
                <label for="runny-nose" label>runny nose</label>
                <input type="checkbox" id="sneezing" value="sneezing">
                <label for="sneezing" label>sneezing</label>
                <input type="checkbox" id="sore-throat" value="sore-throat">
                <label for="sore-throat" label>sore throat</label>
                <input type="checkbox" id="vomiting" value="vomiting">
                <label for="vomiting" label>vomiting</label>
            </div>
        </div>

        <div id="illnesses">
            <div class="all runny-nose sneezing sore-throat itchiness eye-irritation">
                <h3>allergies</h3>
                <p>allergies are an immune response triggered by allergens, an ordinarily harmful substance</p>
                <div class="symptoms">
                    <p class="symptom">runny nose</p>
                    <p class="symptom">sneezing</p>
                    <p class="symptom">sore throat</p>
                    <p class="symptom">itchiness</p>
                    <p class="symptom">eye irritation</p>
                </div>
            </div>

            <div class="all fever headache cough fatigue runny-nose sneezing">
                <h3>cold and flu</h3>
                <p>both of these illnesses are upper respiratory infections, meaning they involve your nose, throat, and lungs. viruses cause both colds and flu by increasing inflammation of the membranes in the nose and throat.</p>
                <div class="symptoms">
                    <p class="symptom">fever</p>
                    <p class="symptom">headache</p>
                    <p class="symptom">cough</p>
                    <p class="symptom">fatigue</p>
                    <p class="symptom">runny-nose</p>
                    <p class="symptom">sneezing</p>
                </div>
            </div>

            <div class="all itchiness redness eye-irritation">
                <h3>conjunctivitis (“pink eye“)</h3>
                <p>Conjunctivitis, an inflammation of the transparent membrane (conjunctiva) that lines your eyelids and part of your eyeballs, has several possible causes. It could be a bacterial or viral infection, an allergic reaction to pollen or animal dander, or a result of chemical irritants (smoke, chlorine, lens solution, etc.)</p>
                <div class="symptoms">
                    <p class="symptom">itchiness</p>
                    <p class="symptom">redness</p>
                    <p class="symptom">eye irritation</p>
                </div>
            </div>

            <div class="all fatigue fever sore-throat">
                <h3>mononucleosis</h3>
                <p>Mononucleosis is an illness caused by the Epstein-Barr virus (EBV), which is spread through saliva.</p>
                <div class="symptoms">
                    <p class="symptom">fatigue</p>
                    <p class="symptom">fever</p>
                    <p class="symptom">sore throat</p>
                </div>
            </div>

            <div class="all fatigue fever sore-throat cough chills">
                <h3>covid-19</h3>
                <p>Coronavirus disease (COVID-19) is an infectious disease caused by the SARS-CoV-2 virus.</p>
                <div class="symptoms">
                    <p class="symptom">fatigue</p>
                    <p class="symptom">fever</p>
                    <p class="symptom">sore throat</p>
                    <p class="symptom">cough</p>
                    <p class="symptom">chills</p>
                </div>
            </div>

            <div class="all fever diarrhea nausea vomiting">
                <h3>stomach flu</h3>
                <p>An intestinal infection typically spread by contact with an infected person or through contaminated food or water.</p>
                <div class="symptoms">
                    <p class="symptom">fever</p>
                    <p class="symptom">diarrhea</p>
                    <p class="symptom">nausea</p>
                    <p class="symptom">vomiting</p>
                </div>
            </div>
        </div>
    </main>

    <script>
       /* let allIllnesses = document.querySelectorAll(".all");
        let filterbtn = document.querySelectorAll("a");

        function filter(event) {
            let selected = event.target.id;
                    allIllnesses.forEach(function(symptom) {
                        let illnessSymptom = symptom.classList;
                        let active = illnessSymptom.contains("active");

                        if(illnessSymptom.contains(selected) && !illnessSymptom.contains("active")) {
                            symptom.style.display = "block";
                            symptom.classList.add("active");
                        } else {
                            symptom.style.display = "none";
                    }
                active.style.display = "block";
                });
        };

        filterbtn.forEach(function(tag){
            tag.addEventListener('click', filter);
        }); */

        const filterBtns = document.querySelectorAll("#filters>input");
        const resultsContainer = document.querySelector('#illnesses');
        
        
        //Add event listener to filter btns
        filterBtns.forEach(function (btn) {
            btn.addEventListener('click', filter);
        });

        function filter() {
            /* Remove all illnesses, it's best practice to take elements off the page first
            first, then manipulate in DOM, then add back in with appendChild */
            
            //Get current results
            const results = Array.from(resultsContainer.children);

            /* while (resultsContainer.hasChildNodes()) {
                resultsContainer.removeChild(resultsContainer.firstChild);
            } */
            //Build array of current clicked filter btns
            let activeFilters = [];
            filterBtns.forEach(function (btn) {
                if (btn.checked) {
                    activeFilters.push(btn.id);
                }
            });

        
            // Remove active class
            let active = results.forEach(function(result){
                result.classList.remove('active');
            });

            //Loop through illnesses/divs
            results.forEach(function (item) { 
                //Get list of classes for each div and convert to an array
                let list = Array.from(item.classList);
                //Loop through clicked filter btns and check to see if included in class list

                let hasActiveFilters = true;

                for (let newItem of activeFilters) {
                    /* if (list.includes('active')){
                        //Skip if already active
                        continue;
                    }
                    else if (list.includes(newItem)) {
                        //If not active yet, add class active
                        item.classList.add('active');
                    }  */
                    if (!list.includes(newItem)) {
                        hasActiveFilters = false;
                        break;
                    }
                    
                };

                if (hasActiveFilters == true) {
                    item.classList.add('active');
                }
            });
            //Put the altered divs back on the page
            /* results.forEach(function (result) {
                resultsContainer.appendChild(result);
            }) */
            
            //Make sure we have the stuff we need
            console.log(activeFilters);
            console.log(results);
        }


    </script>

    <footer>
        <div id="footer-text">
            <h3>healthtrack website</h3>
            <p>This is my first independent project during my time in Computing For All. Many thanks to our instructor Lynn for teaching us many HTML, CSS, and JavaScript concepts that we can practice and incorporate into our projects and being very patient with us during the learning process!</p>
            <p id="red-text">created for cfa winter quarter 2023 by winnie tran</p>
        </div>
        <img src="images/trust.png" width="84px" height="84px">
    </footer>
</body>
</html>